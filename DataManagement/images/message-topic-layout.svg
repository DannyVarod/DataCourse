<svg width="670" height="420" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .bg { fill: #1e1e1e; }
      .topic-border { fill: none; stroke: #4a90e2; stroke-width: 3; }
      .partition-border { fill: none; stroke: #4a90e2; stroke-width: 2; }
      .topic-title { font-family: Arial, sans-serif; font-size: 12px; font-weight: bold; text-anchor: middle; fill: #4a90e2; }
      .partition-title { font-family: Arial, sans-serif; font-size: 10px; font-weight: bold; text-anchor: middle; fill: #4a90e2; }
      .message { fill: #2d3748; stroke: #4a90e2; stroke-width: 1; }
      .focused-message { fill: #3d2914; stroke: #e65100; stroke-width: 2; }
      .orange-message { fill: #2d3748; stroke: #e65100; stroke-width: 2; }
      .purple-message { fill: #2d3748; stroke: #9c27b0; stroke-width: 2; }
      .message-text { font-family: Arial, sans-serif; font-size: 8px; text-anchor: middle; fill: #81c784; }
      .focused-message-text { font-family: Arial, sans-serif; font-size: 8px; text-anchor: middle; fill: #a5d6a7; }
      .producer { fill: #1a4d1a; stroke: #81c784; stroke-width: 2; }
      .consumer { fill: #4d1a1a; stroke: #ff8a65; stroke-width: 2; }
      .consumer-group { fill: #1a1a4d; stroke: #8a8aff; stroke-width: 2; }
      .arrow { stroke: #666; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .flow-arrow { stroke: #4a90e2; stroke-width: 2; fill: none; marker-end: url(#bluearrowhead); }
      .component-text { font-family: Arial, sans-serif; font-size: 9px; font-weight: bold; text-anchor: middle; fill: #ccc; }
      .offset-text { font-family: Arial, sans-serif; font-size: 7px; text-anchor: middle; fill: #999; }
    </style>
    <defs>
      <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
        <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
      </marker>
      <marker id="bluearrowhead" markerWidth="12" markerHeight="9" refX="11" refY="4.5" orient="auto">
        <polygon points="0 0, 12 4.5, 0 9" fill="#4a90e2" />
      </marker>
      <marker id="orangearrowhead" markerWidth="12" markerHeight="9" refX="11" refY="4.5" orient="auto">
        <polygon points="0 0, 12 4.5, 0 9" fill="#e65100" />
      </marker>
      <marker id="purplearrowhead" markerWidth="12" markerHeight="9" refX="11" refY="4.5" orient="auto">
        <polygon points="0 0, 12 4.5, 0 9" fill="#9c27b0" />
      </marker>
    </defs>
  </defs>
  
  <!-- Dark background -->
  <rect x="0" y="0" width="670" height="420" class="bg" />
  
  <!-- Producer -->
  <rect x="40" y="150" width="80" height="50" class="producer" />
  <text x="80" y="170" class="component-text">Producer</text>
  <text x="80" y="185" class="component-text">App</text>
  
  <!-- Topic with Partitions (made taller so title is above arrows) -->
  <rect x="165" y="45" width="300" height="335" class="topic-border" />
  <text x="315" y="70" class="topic-title">Topic: "user-activity"</text>
  
  <!-- Partition 0 (made 50% longer) -->
  <rect x="180" y="120" width="270" height="60" class="partition-border" />
  <text x="315" y="140" class="partition-title">Partition 0</text>
  
  <rect x="190" y="145" width="30" height="25" class="purple-message" />
  <text x="205" y="155" class="message-text">Msg</text>
  <text x="205" y="165" class="message-text">0:0</text>
  
  <rect x="225" y="145" width="30" height="25" class="orange-message" />
  <text x="240" y="155" class="focused-message-text">Msg</text>
  <text x="240" y="165" class="focused-message-text">0:1</text>
  
  <rect x="260" y="145" width="30" height="25" class="message" />
  <text x="275" y="155" class="message-text">Msg</text>
  <text x="275" y="165" class="message-text">0:2</text>
  
  <rect x="295" y="145" width="30" height="25" class="message" />
  <text x="310" y="155" class="message-text">Msg</text>
  <text x="310" y="165" class="message-text">0:3</text>
  
  <rect x="330" y="145" width="30" height="25" class="message" />
  <text x="345" y="155" class="message-text">Msg</text>
  <text x="345" y="165" class="message-text">0:4</text>
  
  <rect x="365" y="145" width="30" height="25" class="message" />
  <text x="380" y="155" class="message-text">Msg</text>
  <text x="380" y="165" class="message-text">0:5</text>
  
  <rect x="400" y="145" width="35" height="25" class="message" />
  <text x="417" y="155" class="message-text">...</text>
  
  <!-- Partition 1 (made 50% longer) -->
  <rect x="180" y="200" width="270" height="60" class="partition-border" />
  <text x="315" y="220" class="partition-title">Partition 1</text>
  
  <rect x="190" y="225" width="30" height="25" class="message" />
  <text x="205" y="235" class="message-text">Msg</text>
  <text x="205" y="245" class="message-text">1:0</text>
  
  <rect x="225" y="225" width="30" height="25" class="message" />
  <text x="240" y="235" class="message-text">Msg</text>
  <text x="240" y="245" class="message-text">1:1</text>
  
  <rect x="260" y="225" width="30" height="25" class="orange-message" />
  <text x="275" y="235" class="message-text">Msg</text>
  <text x="275" y="245" class="message-text">1:2</text>
  
  <rect x="295" y="225" width="30" height="25" class="purple-message" />
  <text x="310" y="235" class="message-text">Msg</text>
  <text x="310" y="245" class="message-text">1:3</text>
  
  <rect x="330" y="225" width="30" height="25" class="message" />
  <text x="345" y="235" class="message-text">Msg</text>
  <text x="345" y="245" class="message-text">1:4</text>
  
  <rect x="365" y="225" width="30" height="25" class="message" />
  <text x="380" y="235" class="message-text">Msg</text>
  <text x="380" y="245" class="message-text">1:5</text>
  
  <rect x="400" y="225" width="35" height="25" class="message" />
  <text x="417" y="235" class="message-text">...</text>
  
  <!-- Partition 2 (made 50% longer) -->
  <rect x="180" y="280" width="270" height="60" class="partition-border" />
  <text x="315" y="300" class="partition-title">Partition 2</text>
  
  <rect x="190" y="305" width="30" height="25" class="message" />
  <text x="205" y="315" class="message-text">Msg</text>
  <text x="205" y="325" class="message-text">2:0</text>
  
  <rect x="225" y="305" width="30" height="25" class="message" />
  <text x="240" y="315" class="message-text">Msg</text>
  <text x="240" y="325" class="message-text">2:1</text>
  
  <rect x="260" y="305" width="30" height="25" class="message" />
  <text x="275" y="315" class="message-text">Msg</text>
  <text x="275" y="325" class="message-text">2:2</text>
  
  <rect x="295" y="305" width="30" height="25" class="purple-message" />
  <text x="310" y="315" class="message-text">Msg</text>
  <text x="310" y="325" class="message-text">2:3</text>
  
  <rect x="330" y="305" width="30" height="25" class="orange-message" />
  <text x="345" y="315" class="message-text">Msg</text>
  <text x="345" y="325" class="message-text">2:4</text>
  
  <rect x="365" y="305" width="30" height="25" class="message" />
  <text x="380" y="315" class="message-text">Msg</text>
  <text x="380" y="325" class="message-text">2:5</text>
  
  <rect x="400" y="305" width="35" height="25" class="message" />
  <text x="417" y="315" class="message-text">...</text>
  
  <!-- Consumer Groups (moved outside topic to the right) -->
  
  <!-- Consumer Group A (orange themed) -->
  <rect x="500" y="90" width="130" height="100" style="fill: #4d2a1a; stroke: #e65100; stroke-width: 2;" />
  <text x="565" y="110" style="font-family: Arial, sans-serif; font-size: 10px; font-weight: bold; text-anchor: middle; fill: #fff;">Consumer Group A</text>
  
  <rect x="510" y="115" width="110" height="30" style="fill: #3d1f0a; stroke: #e65100; stroke-width: 2;" />
  <text x="565" y="130" class="component-text">Consumer A1</text>
  <text x="565" y="140" style="font-family: Arial, sans-serif; font-size: 7px; text-anchor: middle; fill: #ccc;">P0, P1</text>
  
  <rect x="510" y="150" width="110" height="30" style="fill: #3d1f0a; stroke: #e65100; stroke-width: 2;" />
  <text x="565" y="165" class="component-text">Consumer A2</text>
  <text x="565" y="175" style="font-family: Arial, sans-serif; font-size: 7px; text-anchor: middle; fill: #ccc;">P2</text>
  
  <!-- Consumer Group B (purple themed) -->
  <rect x="500" y="210" width="130" height="80" style="fill: #4d1a4d; stroke: #9c27b0; stroke-width: 2;" />
  <text x="565" y="230" style="font-family: Arial, sans-serif; font-size: 10px; font-weight: bold; text-anchor: middle; fill: #fff;">Consumer Group B</text>
  
  <rect x="510" y="235" width="110" height="30" style="fill: #3d1a3d; stroke: #9c27b0; stroke-width: 2;" />
  <text x="565" y="250" class="component-text">Consumer B1</text>
  <text x="565" y="260" style="font-family: Arial, sans-serif; font-size: 7px; text-anchor: middle; fill: #ccc;">P0, P1, P2</text>
  
  <!-- Flow arrows -->
  <line x1="120" y1="175" x2="170" y2="175" class="flow-arrow" />
  <text x="145" y="165" style="font-family: Arial, sans-serif; font-size: 8px; text-anchor: middle; fill: #4a90e2;">PUBLISH</text>
  
  <!-- Consumer Group A arrows (orange) - horizontal at height 110 -->
  <!-- A1 to P0 message 0:1 -->
  <path d="M 500 130 L 460 110 L 240 110 L 240 145" style="stroke: #e65100; stroke-width: 2; fill: none; marker-end: url(#orangearrowhead);" />
  <!-- A1 to P1 message 1:2 -->
  <path d="M 500 130 L 460 110 L 275 110 L 275 225" style="stroke: #e65100; stroke-width: 2; fill: none; marker-end: url(#orangearrowhead);" />
  <!-- A2 to P2 message 2:4 -->
  <path d="M 500 165 L 460 110 L 345 110 L 345 305" style="stroke: #e65100; stroke-width: 2; fill: none; marker-end: url(#orangearrowhead);" />
  
  <!-- Consumer Group B arrows (purple) - horizontal at height 90 -->
  <!-- B1 to P0 message 0:0 -->
  <path d="M 500 250 L 460 90 L 205 90 L 205 145" style="stroke: #9c27b0; stroke-width: 2; fill: none; marker-end: url(#purplearrowhead);" />
  <!-- B1 to P1 message 1:3 -->
  <path d="M 500 250 L 460 90 L 310 90 L 310 225" style="stroke: #9c27b0; stroke-width: 2; fill: none; marker-end: url(#purplearrowhead);" />
  <!-- B1 to P2 message 2:3 -->
  <path d="M 500 250 L 460 90 L 310 90 L 310 305" style="stroke: #9c27b0; stroke-width: 2; fill: none; marker-end: url(#purplearrowhead);" />
  
</svg>
